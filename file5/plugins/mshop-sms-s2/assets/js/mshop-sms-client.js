function MShopCheckByte(a,b,c){for(var d=a.value,e=d.length,f=0,g=0,h="",i="",j=0;j<e;j++)h=d.charAt(j),escape(h).length>4?f+=2:f++,f<=b&&(g=j+1);f>b?(alert("해당 입력창에는 최대 한글 "+b/2+"자 / 영문 "+b+"자를 초과 입력할 수 없습니다."),i=d.substr(0,g),a.value=i,MShopCheckByte(a,b,c)):document.getElementById("byteInfo"+c).innerHTML=f>80?"&nbsp;"+f+' bytes - <span style="color:red;font-weight: bold;">장문</span>':"&nbsp;"+f+" bytes - 단문"}function checkIsJSON(a){try{return JSON.parse(a),!0}catch(a){return!1}}function ischk_number(a){"none"==a?(event.keyCode<48||event.keyCode>57)&&(event.returnValue=!1):"comma"==a&&44!=event.keyCode&&(event.keyCode<48||event.keyCode>57)&&(event.returnValue=!1)}function ischk_hangul(a){console.log("event.keyCode = "+event.keyCode),a.value=a.value.replace(/[\ㄱ-ㅎㅏ-ㅣ가-힣]/g,"")}jQuery(function(a){jQuery("#sms_text_send_form_type").focus(),a("#sms_text_send").on("click",function(){if(""==jQuery("#sms_text_send_form_type").val()||null==jQuery("#sms_text_send_form_type").val())return void alert("입력된 문자 내용이 없습니다.\n\n문자 내용을 입력해주세요.");if(""==jQuery("#recv_number").val()||null==jQuery("#recv_number").val())return void alert("입력된 수신자 번호가 없습니다.\n\n수신자 번호를 입력해주세요.");if(""==jQuery("#send_number").val()||null==jQuery("#send_number").val())return void alert("입력된 발신자 번호가 없습니다.\n\n발신자 번호를 입력해주세요.");var b={action:_mshop_sms_admin.action,_ajax_nonce:_mshop_sms_admin.nonce,recv_number:jQuery("#recv_number").val(),send_number:jQuery("#send_number").val(),text:jQuery("#sms_text_send_form_type").val(),subject:_mshop_sms_admin.mall_title};confirm("문자를 발송하시겠습니까?\n\n발송요청이 접수되면 포인트가 차감이 됩니다.")&&(jQuery("#sms_text_send").attr("disabled","true"),jQuery("#sms_text_send").attr("value","처리중"),a.post(ajaxurl,b,function(a){a?(checkIsJSON(a)&&(a=JSON.parse(a)),"true"==a.success||a.success?(alert(a.data),jQuery("#recv_number").val(""),jQuery("#sms_text_send_form_type").val(""),location.reload()):(alert(a.data),jQuery("#sms_text_send").removeAttr("disabled"),jQuery("#sms_text_send").attr("value","문자 발송"))):(alert("문자 발송 결과를 수신하지 못하였습니다. 잠시후 다시 시도하여 주시기 바랍니다."),jQuery("#sms_text_send").removeAttr("disabled"),jQuery("#sms_text_send").attr("value","문자 발송"))}))})});