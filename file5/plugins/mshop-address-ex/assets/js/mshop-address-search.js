jQuery(function(a){"use strict";function b(){var b={keyword:a(".msaddr-search-keyword input",".msaddr-search-popup"),result:a(".msaddr-search-result table tbody",".msaddr-search-popup"),pagination:a(".msaddr-pagination",".msaddr-search-popup"),closeButton:a("button.mfp-close",".msaddr-search-popup"),xhr:null};return a(".mfp-close",".msaddr-search-popup").on("click",function(){b.close_popup()}),b.close_popup=function(){a(b.keyword).val(""),a(b.result).html(""),a(b.pagination).html(""),a.magnificPopup.close()},b.return_result=function(c,d){a(".search_result_postnum").val(c),a(".search_result_addr").val(d),b.closeButton.trigger("click")},b.validate_keyword=function(){var a=b.keyword.val();if(a.length>0){var c=/[%=><]/;if(1==c.test(a))return a=a.split(c).join(""),!1;for(var d,e,f=["OR","SELECT","INSERT","DELETE","UPDATE","CREATE","DROP","EXEC","UNION","FETCH","DECLARE","TRUNCATE"],g=0;g<f.length;g++){if(d=new RegExp("\\s"+f[g]+"\\s","gi"),d.test(a))return b.keyword.val(a.replace(d,"")),!1;if(e=new RegExp("\\+"+f[g]+"\\+","gi"),e.test(a))return b.keyword.val(a.replace(e,"")),!1}return!0}return!1},b.search=function(c){b.validate_keyword()&&(b.xhr&&4!==b.xhr.readyState&&b.xhr.abort(),b.xhr=a.ajax({jsonp:"callback",dataType:"jsonp",url:_msaddr_search.search_url,data:{currentPage:c,countPerPage:10,resultType:"json",confmKey:_msaddr_search.confirm_key,keyword:b.keyword.val()},async:!0,type:"POST",success:function(a){b.process_response(c,a)},error:function(a,b,c){}}))},b.process_response=function(c,d){d&&d.results&&(b.result.empty(),_.each(d.results.juso,function(c,d){var e=c.roadAddr;c.bdNm=c.bdNm.replace("  "," "),""!==c.bdNm&&-1===c.roadAddr.indexOf(c.bdNm)&&(e+=" "+c.bdNm);var f,g;"road"===_msaddr_search.primary_address_type?(f=e,g=c.jibunAddr):(f=c.jibunAddr,g=e),"yes"===_msaddr_search.show_other_address?a(b.result).append('<tr class="address_row" data-postnum="'+c.zipNo+'" data-addr="'+f+'"><td class="start">'+c.zipNo+"</td><td>"+f+"<br>"+g+"</td></tr>"):a(b.result).append('<tr class="address_row" data-postnum="'+c.zipNo+'" data-addr="'+f+'"><td class="start">'+c.zipNo+"</td><td>"+f+"</td></tr>")}),a("tr.address_row",b.result).on("click",function(){var c=a(this).data("postnum"),d=a(this).data("addr");b.return_result(c,d)}),b.make_navigation(c,d.results.common.totalCount))},b.make_navigation=function(c,d){var e=parseInt(_msaddr_search.count_per_page),f=parseInt(_msaddr_search.nav_size);c=null===c||void 0===c?1:parseInt(c);var g=Math.floor(1+(d-1)/e),h=Math.floor((c-1)/f)*f+1,i=h+(f-1);i>g&&(i=g);for(var j=h>f,k=g>i,l='<input type="button" class="msaddr-nav-button msaddr-move msaddr-prev" data-page= "'+(h-1)+'" value="<<" '+(j?"":"disabled")+"/>",m=h;m<=i;m++)l+=m===c?'<input type="button" class="msaddr-nav-button msaddr-page current" disabled value="'+m+'"/>':'<input type="button" class="msaddr-nav-button msaddr-page" value="'+m+'"/>';l+='<input type="button" class="msaddr-nav-button msaddr-move msaddr-next" data-page= "'+(i+1)+'" value=">>" '+(k?"":"disabled")+"/>",a(b.pagination).html(l),a("input.msaddr-page",b.pagination).on("click",function(){b.search(a(this).val())}),a("input.msaddr-move",b.pagination).on("click",function(){b.search(a(this).data("page"))})},b.keyword.on("keydown",function(a){13===a.keyCode&&(a.preventDefault(),a.stopPropagation())}).on("keyup",function(a){13!==a.keyCode&&b.search(1)}),b}b()}),jQuery(document).ready(function(a){"yes"===_msaddr_search.tel_numeric&&(a("input[type=tel]").numeric(),a("input[name=billing_phone]").numeric(),a("input[name=billing_phone_kr]").numeric(),a("input[name=shipping_phone]").numeric(),a("input[name=shipping_phone_kr]").numeric())}),function(a,b){"function"==typeof define&&define.amd?define("jquery.numeric",["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){function b(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var c=1.1.toLocaleString().match(/\d(.*?)\d/)[1],d=new RegExp("\\"+b(c),"g"),e=function(){var a=null;return function(){if(null===a){var b=document.createElement("input");b.type="number",b.value="1",a=1===b.valueAsNumber}return a}}();a.fn.numeric=function(b){return this.each(function(d,f){var g="INPUT"===f.tagName;"boolean"==typeof b&&(b={decimal:b}),b=b||{},void 0===b.negative&&(b.negative=!g||(!f.getAttribute("min")||0>parseFloat(f.getAttribute("min")))),d=!1===b.decimal?"":"string"==typeof b.decimal&&b.decimal?b.decimal:c;var h=!!b.negative;return d&&"INPUT"===this.tagName&&"number"===this.type&&"valueAsNumber"in this&&e()&&(d=c),void 0===b.decimal&&g&&(g=f.getAttribute("step"))&&"any"!==g&&-1===g.indexOf(".")&&(d=""),a(f).data("numeric.decimal",d).data("numeric.negative",h).on("keypress.numericValue",a.fn.numeric._event).on("keyup.numericValue",a.fn.numeric._event).on("blur.numericValue",a.fn.numeric._event).on("input.numericValue",a.fn.numeric._event)}),this},a.fn.valueAsNumber=function(){if(!this.length)return null;var a=arguments;if(a.length)return this.each(function(){if("INPUT"===this.tagName&&"number"===this.type&&"valueAsNumber"in this&&e()){var b=a[0];void 0===b?this.value="":this.valueAsNumber=b}else this.value=null===a[0]||void 0===a[0]?"":a[0].toString().replace(/\./,b.data(this,"numeric.decimal")||c)});if("INPUT"===this[0].tagName&&"number"===this[0].type&&"valueAsNumber"in this[0]&&e())return this[0].valueAsNumber;var f=this.data("numeric.decimal");return f=f?new RegExp(b(f),"g"):d,""===this[0].value?null:parseFloat(this[0].value.replace(f,"."))},a.fn.numeric._event=function(c){c=a.data(this,"numeric.decimal");var d=a.data(this,"numeric.negative"),e=this.value,f="",g=!1;if("number"!==this.type)var h=this.selectionStart,i=this.selectionEnd;c&&b(c),c&&b(c);for(var j,k=0;k<e.length;k++)j=e.charAt(k),"0"<=j&&"9">=j||d&&"-"===j&&!f.length?f+=j:c&&e.substr(k,c.length)===c&&!g?(g=!0,f+=c,k+=c.length-1):(k<=h&&h--,k<=i&&i--);e!==f&&(this.value=f,"number"!==this.type&&(this.selectionStart=h,this.selectionEnd=i))},a.fn.removeNumeric=function(){return this.removeData("numeric.decimal").removeData("numeric.negative").off(".numericValue")}});