jQuery(function(a){function b(a){a.find("select.single").multiselect({multiple:!1,header:!1,noneSelectedText:"선택하세요.",selectedList:1,minWidth:100}),a.find("select.single.sido").multiselect({click:c}),a.find("select.single.sigungu").multiselect({click:d}),a.find("select.multiple").multiselect({selectedList:100,checkAllText:"전체 선택",uncheckAllText:"선텍 해제",noneSelectedText:"선택하세요.",close:e,minWidth:150}).multiselectfilter({label:"필터:",placeholder:"키워드를 입력하세요."})}function c(b,c){i(a(this).closest("tr"),c.value)}function d(b,c){j(a(this).closest("tr"),c.value)}function e(){var b=a(this).closest("tr"),c=a(this).multiselect("getChecked"),d=[];c.each(function(a,b){d.push("'"+b.value+"'")}),k(b,d.join(","))}function f(b){var c=b.find("select.sigungu"),d=b.find("._sigungu");a(c).html("<option value=''>선택</option>"),a(c).multiselect("refresh"),a(c).multiselect("disable"),a(d).val("")}function g(b){var c=b.find("select.umdl"),d=b.find("._umdl");a(c).html(""),a(c).multiselect("refresh"),a(c).multiselect("disable"),a(d).val("")}function h(b){var c=b.find(".postalcode");a(c).html("")}function i(b,c){var d=b.find("select.sigungu"),e=b.find("._sigungu"),i=(b.find("select.umdl"),b.find("._umdl"),b.find(".postalcode"));""===c?a(i).attr("readonly",""):a(i).attr("readonly","readonly"),f(b),g(b),h(b),"세종특별자치시"==c?(a(d).html("<option value=''>읍/면/동을 선택</option>"),a(d).multiselect("refresh"),j(b)):""!=c&&a.ajax({jsonp:"callback",dataType:"jsonp",url:mshop_iv.api_url,data:{command:"search_sigungu",sido:c},async:!0,type:"POST",success:function(b){a.each(b,function(b){a(d).append('<option value="'+this.sigungu+'">'+this.sigungu+"</option>")}),a(e).val(JSON.stringify(b)),a(d).multiselect("refresh"),a(d).multiselect("enable")},error:function(a,b,c){alert(c)}})}function j(b,c){var d=b.find("select.sido"),e=(b.find("select.sigungu"),b.find("._sigungu"),b.find("select.umdl")),f=b.find("._umdl"),g=b.find(".postalcode");a(e).html(""),a(f).val(""),a(e).multiselect("refresh"),a(e).multiselect("disable"),""===c&&"세종특별자치시"!==a(d).val()||a.ajax({jsonp:"callback",dataType:"jsonp",url:mshop_iv.api_url,data:{command:"search_bjymdl",sido:a(d).val(),sigungu:c},async:!0,type:"POST",success:function(b){b.bjymdl&&(a(e).html(""),a.each(b.bjymdl,function(b){a(e).append('<option bjymdl="'+this.bjymdl+'"value="'+this.bjdcode+'">'+this.bjymdl+"</option>")}),a(f).val(JSON.stringify(b.bjymdl)),a(e).multiselect("refresh"),a(e).multiselect("enable")),b.postalcode&&a(g).html(b.postalcode.join(","))},error:function(a,b,c){alert(c)}})}function k(b,c){var d=b.find(".postalcode");a(d).html(""),a.ajax({jsonp:"callback",dataType:"jsonp",url:mshop_iv.api_url,data:{command:"search_postalcode",bjdcode:c},async:!0,type:"POST",success:function(b){b instanceof Array?a(d).html(b.toString()):a(d).html(b)},error:function(a,b,c){alert(c)}})}function l(){var b=a("#mshop_iv_delivery_fee_table select[name^=mshop_iv_delivery_fee_umdl]");b.each(function(b,c){a(c).attr("name","mshop_iv_delivery_fee_umdl["+b+"][]")}),b.each(function(a,b){console.log(b)})}var m=a("#mshop_iv_delivery_fee_table"),n=m.find("a.remo_rows");b(a(".mshop_input_table")),m.find('input[name="selector"]').on("click",function(){m.find('input:checked[name="selector"]').length>0?n.removeAttr("disabled"):n.attr("disabled","disabled")}),m.find("input[type=checkbox]").on("change",function(){"checked"==a(this).attr("checked")?a(this).parent().find("input[type=hidden]").val(1):a(this).parent().find("input[type=hidden]").val(0)}),a(".mshop_input_table .remo_rows").on("click",function(b){return a(this).closest(".mshop_input_table").find('tbody input[name="selector"]').each(function(){var b=a(this);b.is(":checked")&&b.parents("tr.iv-delivery").remove()}),l(),!1}),a(".mshop_input_table a.add").click(function(){var c=a("#mshop_iv_row_template tr"),d=a("#mshop_iv_delivery_fee_table tbody"),e=c.clone(!0).css("display","table-row").removeClass("rowtemplate");return b(a(e)),a(d).append(e),l(),!1})});